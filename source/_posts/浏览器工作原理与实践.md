---
title: 浏览器工作原理与实践
date: 2021-08-09 15:56:38
tags:
---

> 1. 浏览器是单进程？多进程？单线程？多线程？
> 2. 什么是重排，重绘，合并？
> 3. css、js会不会阻塞DOM生成？js的async, defer
> 4. 为什么操作DOM很慢？解决方案`requestAnimationFrame`或虚拟滚动
> 5. 为什么CSS动画比JS高效？
> 6. 为什么会碰到单个页面卡死最终导致所有页面崩溃？
为什么会生成CSSOM树
> 7. 上下文执行栈和作用域链的区别
> 8. 首次加载的白屏时间


### 进程 vs 线程
多线程可以并行处理任务，但是线程是不能单独存在的，它是由进程来启动和管理的。
启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程。

线程与进程之间的关系
- 线程是依附于进程的，而进程中使用多线程并行处理能提升运算效率。
1. 进程中的任意一线程执行出错，都会导致整个进程的崩溃。
2. 线程之间共享进程中的数据。
3. 当一个进程关闭之后，操作系统会回收进程所占用的内存。
4. 进程之间的内容相互隔离。



### 1. 浏览器是单进程？多进程？单线程？多线程？
单进程浏览器是指浏览器的所有功能模块都是运行在同一个进程里，这些模块包含了网络、插件、JavaScript 运行环境、渲染引擎和页面等。

打开一个页面，会有4个进程
- 浏览器进程
主要负责界面显示、用户交互、子进程管理，同时提供存储等功能。
- 渲染进程
核心任务是将 HTML、CSS 和 JavaScript 转换为用户可以与之交互的网页，排版引擎 Blink 和 JavaScript 引擎 V8 都是运行在该进程中，默认情况下，Chrome 会为每个 Tab 标签创建一个渲染进程。出于安全考虑，渲染进程都是运行在沙箱模式下。
- GPU 进程
其实，Chrome 刚开始发布的时候是没有 GPU 进程的。而 GPU 的使用初衷是为了实现 3D CSS 的效果，只是随后网页、Chrome 的 UI 界面都选择采用 GPU 来绘制，这使得 GPU 成为浏览器普遍的需求。最后，Chrome 在其多进程架构上也引入了 GPU 进程。
- 网络进程
主要负责页面的网络资源加载，之前是作为一个模块运行在浏览器进程里面的，直至最近才独立出来，成为一个单独的进程。
- 插件进程
主要是负责插件的运行，因插件易崩溃，所以需要通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响。


